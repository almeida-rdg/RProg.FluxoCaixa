{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Yarp": "Information"
    }  },
  "AllowedHosts": "*",
  "ReverseProxy": {
    "Routes": {
      "lancamentos-route": {
        "ClusterId": "lancamentos-cluster",
        "Match": {
          "Path": "/api/lancamentos/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/lancamentos/{**catch-all}"
          }
        ]
      },
      "consolidado-route": {
        "ClusterId": "consolidado-cluster",
        "Match": {
          "Path": "/api/consolidado/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/consolidado/{**catch-all}"
          }
        ]
      }
    },
    "Clusters": {
      "lancamentos-cluster": {
        "LoadBalancingPolicy": "RoundRobin",
        "HealthCheck": {
          "Enabled": true,
          "Interval": "00:00:30",
          "Timeout": "00:00:10",
          "Policy": "passive",
          "Path": "/health"
        },
        "HttpClient": {
          "DangerousAcceptAnyServerCertificate": true
        },
        "Destinations": {
          "destination1": {
            "Address": "http://lancamentos-api:8080/"
          }
        }
      },
      "consolidado-cluster": {
        "LoadBalancingPolicy": "RoundRobin",
        "HealthCheck": {
          "Enabled": true,
          "Interval": "00:00:30",
          "Timeout": "00:00:10",
          "Policy": "passive",
          "Path": "/health"
        },
        "HttpClient": {
          "DangerousAcceptAnyServerCertificate": true
        },
        "Destinations": {
          "destination1": {
            "Address": "http://consolidado-api:8080/"
          }
        }
      }
    }
  },
  "Yarp": {
    "LoadBalancing": {
      "Policy": "RoundRobin"
    },
    "HealthCheck": {
      "Enabled": true,
      "Interval": "00:00:30",
      "Timeout": "00:00:10",
      "Policy": "passive",
      "Path": "/health"
    },
    "Clusters": {
      "Lancamentos": {
        "Destinations": {
          "destination1": {
            "Address": "http://lancamentos-api:8080/"
          }
        }
      },
      "Consolidado": {
        "Destinations": {
          "destination1": {
            "Address": "http://consolidado-api:8080/"
          }
        }
      }
    },
    "CircuitBreaker": {
      "MaxConcurrentRequests": 100,
      "MaxConcurrentRetries": 3,
      "ConsecutiveFailureLimit": 3,
      "ReactivationPeriod": "00:01:00"
    }
  },
  "Cache": {
    "DefaultExpirationMinutes": 5,
    "MaxSizeInMB": 100,
    "SizeLimit": 1000
  },
  "RateLimit": {
    "RequestsPerMinute": 60,
    "RequestsPerSecond": 10,
    "BlockDurationMinutes": 5
  },
  "Security": {
    "EnableProtection": true,
    "MaxRequestSizeInMB": 50
  },
  "Monitoring": {
    "HealthCheckIntervalSeconds": 30,
    "ScalabilityCheckIntervalMinutes": 1,
    "CpuThresholdPercent": 70,
    "MemoryThresholdPercent": 70,
    "UnhealthyTimeoutMinutes": 1
  },
  "Serilog": {
    "Using": [ "Serilog.Sinks.Console", "Serilog.Sinks.File" ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {SourceContext}: {Message:lj}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "logs/proxy-.log",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 7,
          "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} {Level:u3}] {SourceContext}: {Message:lj}{NewLine}{Exception}"        }
      }
    ]
  },
  "Jwt": {
    "SecretKey": "RProg.FluxoCaixa.SuperSecretKey.2024.MustBe256BitsOrMore.ForProductionUseEnvironmentVariable",
    "Issuer": "RProg.FluxoCaixa",
    "Audience": "RProg.FluxoCaixa.API",
    "ExpirationMinutes": 60
  },
  "Authentication": {
    "EnableJwt": true,
    "RequireHttps": false,
    "ValidateLifetime": true,
    "ClockSkew": "00:00:00"
  }
}
